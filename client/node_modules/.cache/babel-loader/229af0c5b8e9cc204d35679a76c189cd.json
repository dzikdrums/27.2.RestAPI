{"ast":null,"code":"var _jsxFileName = \"/Users/macus/Desktop/RestApi/client/src/components/features/SeatChooser/SeatChooser.js\";\nimport React from 'react';\nimport { Button, Progress, Alert } from 'reactstrap';\nimport io from 'socket.io-client';\nimport './SeatChooser.scss';\n\nclass SeatChooser extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.socket = io.connect(process.env.NODE_ENV === 'production' ? process.env.PORT : 'http://localhost:8000/order-a-ticket');\n\n    this.isTaken = seatId => {\n      const _this$props = this.props,\n            seats = _this$props.seats,\n            chosenDay = _this$props.chosenDay;\n      return seats.some(item => item.seat === seatId && item.day === chosenDay);\n    };\n\n    this.prepareSeat = seatId => {\n      const _this$props2 = this.props,\n            chosenSeat = _this$props2.chosenSeat,\n            updateSeat = _this$props2.updateSeat;\n      const isTaken = this.isTaken;\n      if (seatId === chosenSeat) return React.createElement(Button, {\n        key: seatId,\n        className: \"seats__seat\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 29\n        },\n        __self: this\n      }, seatId);else if (isTaken(seatId)) return React.createElement(Button, {\n        key: seatId,\n        className: \"seats__seat\",\n        disabled: true,\n        color: \"secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 30\n        },\n        __self: this\n      }, seatId);else return React.createElement(Button, {\n        key: seatId,\n        color: \"primary\",\n        className: \"seats__seat\",\n        outline: true,\n        onClick: e => updateSeat(e, seatId),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31\n        },\n        __self: this\n      }, seatId);\n    };\n  }\n\n  componentDidMount() {\n    const _this$props3 = this.props,\n          loadSeats = _this$props3.loadSeats,\n          loadSeatsData = _this$props3.loadSeatsData;\n    loadSeats();\n    this.socket.on('seatsUpdated', seats => loadSeatsData(seats));\n    console.log(this.loadSeatsDate);\n  }\n\n  render() {\n    const prepareSeat = this.prepareSeat;\n    const requests = this.props.requests;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, \"Pick a seat\"), React.createElement(\"small\", {\n      id: \"pickHelp\",\n      className: \"form-text text-muted ml-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, React.createElement(Button, {\n      color: \"secondary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }), \" \\u2013 seat is already taken\"), React.createElement(\"small\", {\n      id: \"pickHelpTwo\",\n      className: \"form-text text-muted ml-2 mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, React.createElement(Button, {\n      outline: true,\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }), \" \\u2013 it's empty\"), requests['LOAD_SEATS'] && requests['LOAD_SEATS'].success && React.createElement(\"div\", {\n      className: \"seats\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, [...Array(50)].map((x, i) => prepareSeat(i + 1))), requests['LOAD_SEATS'] && requests['LOAD_SEATS'].pending && React.createElement(Progress, {\n      animated: true,\n      color: \"primary\",\n      value: 50,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }), requests['LOAD_SEATS'] && requests['LOAD_SEATS'].error && React.createElement(Alert, {\n      color: \"warning\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, \"Couldn't load seats...\"), React.createElement(\"p\", {\n      className: \"seats-availability\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, \"Free seats: 2/5\"));\n  }\n\n}\n\nexport default SeatChooser;","map":{"version":3,"sources":["/Users/macus/Desktop/RestApi/client/src/components/features/SeatChooser/SeatChooser.js"],"names":["React","Button","Progress","Alert","io","SeatChooser","Component","socket","connect","process","env","NODE_ENV","PORT","isTaken","seatId","props","seats","chosenDay","some","item","seat","day","prepareSeat","chosenSeat","updateSeat","e","componentDidMount","loadSeats","loadSeatsData","on","console","log","loadSeatsDate","render","requests","success","Array","map","x","i","pending","error"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Button, Progress, Alert } from 'reactstrap';\r\nimport io from 'socket.io-client';\r\n\r\nimport './SeatChooser.scss';\r\n\r\nclass SeatChooser extends React.Component {\r\n  \r\n  componentDidMount() {\r\n    const { loadSeats, loadSeatsData } = this.props;\r\n    loadSeats();\r\n    this.socket.on('seatsUpdated', (seats) => loadSeatsData(seats));\r\n    console.log(this.loadSeatsDate);\r\n  }\r\n\r\n  socket = io.connect((process.env.NODE_ENV === 'production') ? process.env.PORT : 'http://localhost:8000/order-a-ticket');\r\n\r\n\r\n  isTaken = (seatId) => {\r\n    const { seats, chosenDay } = this.props;\r\n\r\n    return (seats.some(item => (item.seat === seatId && item.day === chosenDay)));\r\n  }\r\n\r\n  prepareSeat = (seatId) => {\r\n    const { chosenSeat, updateSeat } = this.props;\r\n    const { isTaken } = this;\r\n\r\n    if(seatId === chosenSeat) return <Button key={seatId} className=\"seats__seat\" color=\"primary\">{seatId}</Button>;\r\n    else if(isTaken(seatId)) return <Button key={seatId} className=\"seats__seat\" disabled color=\"secondary\">{seatId}</Button>;\r\n    else return <Button key={seatId} color=\"primary\" className=\"seats__seat\" outline onClick={(e) => updateSeat(e, seatId)}>{seatId}</Button>;\r\n  }\r\n\r\n  render() {\r\n\r\n    const { prepareSeat } = this;\r\n    const { requests } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <h3>Pick a seat</h3>\r\n        <small id=\"pickHelp\" className=\"form-text text-muted ml-2\"><Button color=\"secondary\" /> – seat is already taken</small>\r\n        <small id=\"pickHelpTwo\" className=\"form-text text-muted ml-2 mb-4\"><Button outline color=\"primary\" /> – it's empty</small>\r\n        { (requests['LOAD_SEATS'] && requests['LOAD_SEATS'].success) && <div className=\"seats\">{[...Array(50)].map((x, i) => prepareSeat(i+1) )}</div>}\r\n        { (requests['LOAD_SEATS'] && requests['LOAD_SEATS'].pending) && <Progress animated color=\"primary\" value={50} /> }\r\n        { (requests['LOAD_SEATS'] && requests['LOAD_SEATS'].error) && <Alert color=\"warning\">Couldn't load seats...</Alert> }\r\n        <p className='seats-availability'>Free seats: 2/5</p>\r\n      </div>\r\n    )\r\n  };\r\n}\r\n\r\nexport default SeatChooser;"]},"metadata":{},"sourceType":"module"}