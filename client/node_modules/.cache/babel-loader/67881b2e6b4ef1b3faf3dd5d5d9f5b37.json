{"ast":null,"code":"import _objectSpread from \"/Users/macus/Desktop/RestApi/client/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport axios from 'axios';\nimport { API_URL } from '../config';\n/* SELECTORS */\n\nexport const getSeats = ({\n  seats\n}) => seats.data;\nexport const getRequests = ({\n  seats\n}) => seats.requests;\n/* ACTIONS */\n// action name creator\n\nconst reducerName = 'seats';\n\nconst createActionName = name => \"app/\".concat(reducerName, \"/\").concat(name);\n\nconst START_REQUEST = createActionName('START_REQUEST');\nconst END_REQUEST = createActionName('END_REQUEST');\nconst ERROR_REQUEST = createActionName('ERROR_REQUEST');\nconst LOAD_SEATS = createActionName('LOAD_SEATS');\nconst ADD_SEAT = createActionName('ADD_SEAT');\nexport const startRequest = payload => ({\n  payload,\n  type: START_REQUEST\n});\nexport const endRequest = payload => ({\n  payload,\n  type: END_REQUEST\n});\nexport const errorRequest = error => ({\n  error,\n  type: ERROR_REQUEST\n});\nexport const loadSeats = payload => ({\n  payload,\n  type: LOAD_SEATS\n});\nexport const addSeat = payload => ({\n  payload,\n  type: ADD_SEAT\n});\n/* THUNKS */\n\nexport const loadSeatsRequest = () => {\n  return async dispatch => {\n    dispatch(startRequest({\n      name: 'LOAD_SEATS'\n    }));\n\n    try {\n      let res = await axios.get(\"\".concat(API_URL, \"/seats\"));\n      dispatch(loadSeats(res.data));\n      dispatch(endRequest({\n        name: 'LOAD_SEATS'\n      }));\n    } catch (e) {\n      dispatch(errorRequest({\n        name: 'LOAD_SEATS',\n        error: e.message\n      }));\n    }\n  };\n};\nexport const addSeatRequest = seat => {\n  return async dispatch => {\n    dispatch(startRequest({\n      name: 'ADD_SEAT'\n    }));\n    console.log(seat);\n\n    try {\n      let res = await axios.post(\"\".concat(API_URL, \"/seats\"), seat);\n      dispatch(addSeat(res.data));\n      dispatch(endRequest({\n        name: 'ADD_SEAT'\n      }));\n    } catch (e) {\n      dispatch(errorRequest({\n        name: 'ADD_SEAT',\n        error: e.message\n      }));\n    }\n  };\n};\n/* INITIAL STATE */\n\nconst initialState = {\n  data: [],\n  requests: []\n};\n/* REDUCER */\n\nexport default function reducer(statePart = initialState, action = {}) {\n  switch (action.type) {\n    case LOAD_SEATS:\n      return _objectSpread({}, statePart, {\n        data: [...action.payload]\n      });\n\n    case ADD_SEAT:\n      return _objectSpread({}, statePart, {\n        data: [...statePart.data, action.payload]\n      });\n\n    case START_REQUEST:\n      return _objectSpread({}, statePart, {\n        requests: _objectSpread({}, statePart.requests, {\n          [action.payload.name]: {\n            pending: true,\n            error: null,\n            success: false\n          }\n        })\n      });\n\n    case END_REQUEST:\n      return _objectSpread({}, statePart, {\n        requests: _objectSpread({}, statePart.requests, {\n          [action.payload.name]: {\n            pending: false,\n            error: null,\n            success: true\n          }\n        })\n      });\n\n    case ERROR_REQUEST:\n      return _objectSpread({}, statePart, {\n        requests: _objectSpread({}, statePart.requests, {\n          [action.payload.name]: {\n            pending: false,\n            error: action.payload.error,\n            success: false\n          }\n        })\n      });\n\n    default:\n      return statePart;\n  }\n}","map":{"version":3,"sources":["/Users/macus/Desktop/RestApi/client/src/redux/seatsRedux.js"],"names":["axios","API_URL","getSeats","seats","data","getRequests","requests","reducerName","createActionName","name","START_REQUEST","END_REQUEST","ERROR_REQUEST","LOAD_SEATS","ADD_SEAT","startRequest","payload","type","endRequest","errorRequest","error","loadSeats","addSeat","loadSeatsRequest","dispatch","res","get","e","message","addSeatRequest","seat","console","log","post","initialState","reducer","statePart","action","pending","success"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport { API_URL } from '../config';\r\n\r\n/* SELECTORS */\r\nexport const getSeats = ({ seats }) => seats.data;\r\nexport const getRequests = ({ seats }) => seats.requests;\r\n\r\n/* ACTIONS */\r\n\r\n// action name creator\r\nconst reducerName = 'seats';\r\nconst createActionName = name => `app/${reducerName}/${name}`;\r\n\r\nconst START_REQUEST = createActionName('START_REQUEST');\r\nconst END_REQUEST = createActionName('END_REQUEST');\r\nconst ERROR_REQUEST = createActionName('ERROR_REQUEST');\r\n\r\nconst LOAD_SEATS = createActionName('LOAD_SEATS');\r\nconst ADD_SEAT = createActionName('ADD_SEAT');\r\n\r\nexport const startRequest = payload => ({ payload, type: START_REQUEST });\r\nexport const endRequest = payload => ({ payload, type: END_REQUEST });\r\nexport const errorRequest = error => ({ error, type: ERROR_REQUEST });\r\n\r\nexport const loadSeats = payload => ({ payload, type: LOAD_SEATS });\r\nexport const addSeat = payload => ({ payload, type: ADD_SEAT });\r\n\r\n/* THUNKS */\r\n\r\nexport const loadSeatsRequest = () => {\r\n  return async dispatch => {\r\n\r\n    dispatch(startRequest({ name: 'LOAD_SEATS' }));\r\n    try {\r\n\r\n      let res = await axios.get(`${API_URL}/seats`);\r\n      dispatch(loadSeats(res.data));\r\n      dispatch(endRequest({ name: 'LOAD_SEATS' }));\r\n\r\n    } catch(e) {\r\n      dispatch(errorRequest({ name: 'LOAD_SEATS', error: e.message }));\r\n    }\r\n\r\n  };\r\n};\r\n\r\nexport const addSeatRequest = (seat) => {\r\n  return async dispatch => {\r\n\r\n    dispatch(startRequest({ name: 'ADD_SEAT' }));\r\n    console.log(seat);\r\n    try {\r\n\r\n      let res = await axios.post(`${API_URL}/seats`, seat);\r\n      dispatch(addSeat(res.data));\r\n      dispatch(endRequest({ name: 'ADD_SEAT' }));\r\n\r\n    } catch(e) {\r\n      dispatch(errorRequest({ name: 'ADD_SEAT', error: e.message }));\r\n    }\r\n\r\n  };\r\n};\r\n\r\n/* INITIAL STATE */\r\n\r\nconst initialState = {\r\n  data: [],\r\n  requests: [],\r\n};\r\n\r\n/* REDUCER */\r\n\r\nexport default function reducer(statePart = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case LOAD_SEATS: \r\n      return { ...statePart, data: [...action.payload] };\r\n    case ADD_SEAT: \r\n      return { ...statePart, data: [...statePart.data, action.payload] }\r\n    case START_REQUEST:\r\n      return { ...statePart, requests: {...statePart.requests, [action.payload.name]: { pending: true, error: null, success: false }} };\r\n    case END_REQUEST:\r\n      return { ...statePart, requests: { ...statePart.requests, [action.payload.name]: { pending: false, error: null, success: true }} };\r\n    case ERROR_REQUEST:\r\n      return { ...statePart, requests: { ...statePart.requests, [action.payload.name]: { pending: false, error: action.payload.error, success: false }} };\r\n    default:\r\n      return statePart;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}